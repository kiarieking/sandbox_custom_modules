<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <template id="oo_report_invoice_document" inherit_id="account.report_invoice_document">

        <xpath expr="//t[@t-set='address']" position="replace">
            <div class='row mb-4'>
                <div class="col-7">
                    <div id="esd" t-if="o.move_type in ['out_invoice', 'out_refund'] and o.esd_signature">
                        <img t-if="o.esd_qr_code" t-att-src="'data:image/png;base64,%s' % to_text(o.esd_qr_code)"
                             width="105" height="105"/>
                        <p class="m-0">
                            MW:
                            <span t-field="o.esd_signature"/>
                        </p>
                        <p class="m-0">
                            SN:
                            <span t-field="o.esd_device_serial"/>
                        </p>
                    </div>
                </div>
                <div class="col-5">
                    <address t-field="o.partner_id"
                             t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: True}"/>
                    <div t-if="o.partner_id.vat" class="mt16">
                        <t t-if="o.company_id.country_id.vat_label"
                           t-esc="o.company_id.account_fiscal_country_id.vat_label" id="inv_tax_id_label"/>
                        <t t-else="">Tax ID</t>
                        :
                        <span t-field="o.partner_id.vat"/>
                        <p t-if="o.partner_id.tax_exemption">
                            <span>Tax Excemption No.</span>
                            <span t-field="o.partner_id.tax_exemption"/>
                        </p>
                    </div>
                </div>
            </div>
        </xpath>

        <xpath expr="//div[@class='page']/h2[1]" position="replace">
            <h2>
                <span t-if="o.move_type == 'out_invoice' and o.state == 'posted'">Tax Invoice</span>
                <span t-if="o.move_type == 'out_invoice' and o.state == 'draft'">Draft Tax Invoice</span>
                <span t-if="o.move_type == 'out_invoice' and o.state == 'cancel'">Cancelled Tax Invoice</span>
                <span t-if="o.move_type == 'out_refund'">Credit Note</span>
                <span t-if="o.move_type == 'in_refund'">Vendor Credit Note</span>
                <span t-if="o.move_type == 'in_invoice'">Vendor Bill</span>
                <span t-if="o.name != '/'" t-field="o.name"/>
            </h2>
        </xpath>

    </template>
</odoo>
